# Тестовый полигон для четыреждыблядских токенов

## Зависимости
1. python3.6
1. pip
1. virtualenv

## Установка всего нужного
```bash
virtualenv env
source env/bin/activate
pip install -r requirements.txt
```
**Важно: тут используется модуль PyJWT, а не просто JWT** 

## Использование
1. Чтобы запустить оба сервера:
```bash
make run
```
2. Заходим на [первый сервер](http://127.0.0.1:5000)
1. Жмем `Login with server2`
1. Открывается страница логина на втором сервере. Вводим логин-пароль

| Username | Password |
|----------|----------|
| first    | abcd     |
| second   | 1234     |
| third    | abcd1234 |
5. Нас перенаправляет на ручку, генерирующую токен
1. После генерации токена нас автоматически перенаправляет на страницу логина на первом сервере с передачей токена
1. Если токен кошерный, мы логинимся, иначе кинет exception
1. Курим код, ищем что не так, вносим предложения, высказываем недовольства

## Misc

Чтобы убить оба сервера:
```bash
make kill
```
Если что-то пошло не так:
```bash
make clean
killall gunicorn
или
pkill gunicorn
```

## TODO

- [ ] Сделать симметричную систему, чтобы можно было логиниться с обоих серверов друг на друга
- [ ] Вывод информации для дебага
- [ ] Отслеживание использованных токенов по jti
